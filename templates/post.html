{% from "bootstrap5/form.html" import render_form %} {% block content %}
{%include "header.html"%}
<script>
    document.addEventListener('DOMContentLoaded', function() {
    var hash = window.location.hash;
    if (hash) {
        var element = document.querySelector(hash);
        if (element) {
            element.scrollIntoView({ behavior: 'auto' });
        }
    }
});


    </script>
        <!-- Page Header-->
        <header class="masthead" style="background-image: url('{{post.img_url}}')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="post-heading">
                            <h1>{{post.title}}</h1>
                            <h2 class="subheading">{{post.subtitle}}</h2>
                            <span class="meta">
                                Posted by
                                <a href="{{url_for('profile_dashboard',username='admin')}}">{{post.author.username}}</a>
                                on {{post.date}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <article>
  <div class="container px-4 px-lg-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-7">
        {{ post.body|safe }}
        {% if current_user.id==1: %}

        <div class="d-flex justify-content-end mb-4">
          <a
            class="btn btn-primary float-right"
            href="{{url_for('edit_post', post_id=post.id)}}"
            >Edit Post</a
          >
        </div>
          {%endif%}

        <!-- Comments Area -->

        <div class="comment">
            {{ ckeditor.load() }} {{ ckeditor.config(name='body') }} {{
        render_form(form, novalidate=True, button_map={"submit": "primary"}) }}
          <!--all comments in the list-->
          <ul class="commentList" style="padding:50px 0px 50px 0px;">
              {%for comment in all_comments%}
            <li id="com{{comment.id}}">
              <div class="commenterImage">
                <img src="{{comment.author_avatar}}" style="width:36px;" />
                  <span class="date sub-text"><a href="{{url_for('profile_dashboard',username=comment.username)}}">{{comment.username}}</a></span>
              </div>
              <div class="commentText">
                <p>{{comment.body|safe}}</p>
                  {%if current_user.id==comment.user_id%}
                  <a href="{{url_for('edit_comment',comment_id=comment.id,post_id=post.id)}}" style="background-color: #0dcaf0;padding:10px;border-radius: 5%">EDIT</a>
                  {%endif%}
                <p > <a href="{{url_for('handling_reactions',comment_id=comment.id,reaction='like',commenter_id=current_user.id,post_id=post.id)}}" style="text-decoration: none;">üëç {{comment.likes}}</a> <a href="{{url_for('handling_reactions',comment_id=comment.id,reaction='dislike',commenter_id=current_user.id,post_id=post.id)}}" style="text-decoration: none;"> üëé {{comment.dislikes}}</a> </p>
              </div>
            </li>
              {%endfor%}
          </ul>
        </div>
      </div>
    </div>
  </div>
</article>

        {%include "footer.html"%}{% endblock %}
